<!--
********************************************************

Schematron rules for HL7 CDA-CH, V1.2 (2.16.756.5.30.1.1.1.1.1 )
Language: de-CH

History:
20.12.2009: Tony Schaller, medshare GmbH (Draft)
31.12.2009: Tony Schaller, medshare GmbH (Abgabe an Auftraggeber)
26.03.2010: Stefan Schenk, medshare GmbH, (XHTML-Dokumentation)
17.05.2010: Tony Schaller, medshare GmbH (Einfügen finaler OIDs)

********************************************************
-->
<!--
********************************************************
Header Templates
********************************************************
-->
<pattern>

	<!-- Entity Information -->
	<xhtml:ul id="entity_HL7-cda-ch-1.2">
		<xhtml:li class="filename">cda-ch-1.2.ent</xhtml:li>
		<xhtml:li class="version">1.0</xhtml:li>
	</xhtml:ul>
    
	<rule context='*[cda:templateId/@root="2.16.756.5.30.1.1.1.1.1" and cda:templateId/@extension="CDA-CH.Head.Empl"]'>
    	<!-- Rule Documentation -->
		<xhtml:h3 lang="de_ch">CDA-CH Header Templates</xhtml:h3>
		<xhtml:p lang="de_ch">Die nachfolgenden Regeln beschreiben die Prüfungen zu den CDA-CH Header Templates.</xhtml:p>
		<!--
		<xhtml:h3 lang="fr_ch">todo: francaise</xhtml:h3>
		<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
		<xhtml:h3 lang="it_ch">todo: italiano</xhtml:h3>
		<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
		--> 		
        
 		<assert id="entity_HL7-cda-ch-1.2-0001" test='self::cda:participant/@typeCode="IND"'>
			<xhtml:p lang="de_ch">CDA-CH 'Arbeitgeber ' müssen als 'participant' mit typeCode 'IND' im CDA Header deklariert werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-0002" test='cda:templateId/@root="1.3.6.1.4.1.19376.1.5.3.1.2.2"'>
			<xhtml:p lang="de_ch">CDA-CH Arbeitgeber müssen mit der IHE PCC Specification 'Employer and School Contacts' (1.3.6.1.4.1.19376.1.5.3.1.2) deklariert werden</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
	</rule>
    
    <!--
    ********************************************************
    Body Templates
    ********************************************************
    -->

	<!--
	********************************************************
	Bemerkungen
	********************************************************
	-->
	<rule context='*[cda:templateId/@root="2.16.756.5.30.1.1.1.1.1" and cda:templateId/@extension="CDA-CH.Body.Rem"]'>
    	<!-- Rule Documentation -->
		<xhtml:h3 lang="de_ch">CDA-CH Bemerkungen</xhtml:h3>
		<xhtml:p lang="de_ch">Die nachfolgenden Regeln beschreiben die Prüfungen zu den CDA-CH Bemerkungen.</xhtml:p>
		<!--
		<xhtml:h3 lang="fr_ch">todo: francaise</xhtml:h3>
		<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
		<xhtml:h3 lang="it_ch">todo: italiano</xhtml:h3>
		<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
		--> 		
        
 		<assert id="entity_HL7-cda-ch-1.2-0101" test="self::cda:section">
			<xhtml:p lang="de_ch">CDA-CH 'Bemerkungen' müssen als 'section' im CDA Body deklariert werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-0102" test="cda:title='Bemerkungen'">
			<xhtml:p lang="de_ch">CDA-CH 'Bemerkungen' müssen einen section title 'Bemerkungen' enthalten</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-0103" test="cda:text">
			<xhtml:p lang="de_ch">CDA-CH 'Bemerkungen' müssen einen narrativen Text enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
	</rule>

	<!--
	********************************************************
	Diagnosenliste
	********************************************************
	-->
	<rule context='*[cda:templateId/@root="2.16.756.5.30.1.1.1.1.1" and cda:templateId/@extension="CDA-CH.Body.DiagList"]'>
    	<!-- Rule Documentation -->
		<xhtml:h3 lang="de_ch">CDA-CH Diagnosenliste</xhtml:h3>
		<xhtml:p lang="de_ch">Die nachfolgenden Regeln beschreiben die Prüfungen zu den CDA-CH Diagnosenliste.</xhtml:p>
		<!--
		<xhtml:h3 lang="fr_ch">todo: francaise</xhtml:h3>
		<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
		<xhtml:h3 lang="it_ch">todo: italiano</xhtml:h3>
		<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
		--> 		
        
 		<assert id="entity_HL7-cda-ch-1.2-1001" test="self::cda:section">
			<xhtml:p lang="de_ch">CDA-CH 'Diagnosenliste' muss als 'section' im CDA Body deklariert werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1002" test="cda:text">
			<xhtml:p lang="de_ch">CDA-CH 'Diagnosenliste' muss einen narrativen Text enthalten</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1003" test="cda:title='Diagnosen'">
			<xhtml:p lang="de_ch">CDA-CH 'Diagnosenliste' muss einen section title 'Diagnosen' enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1004" test='cda:code/@codeSystem="2.16.840.1.113883.6.1"'>
			<xhtml:p lang="de_ch">CDA-CH 'Diagnosenliste' muss eine Codierung der Bedeutung der Section enthalten (gültiger Wert aus der Wertetabelle '2.16.840.1.113883.6.1').</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1005" test='cda:code/@code=document("../../../../schematrons/HL7.ch/CDA-CH/v1.2/cda-ch-1.2-voc.xml")/systems/system[@codeSystemName="DiagnosisSectionCode"]/code/@value'>
			<xhtml:p lang="de_ch">CDA-CH 'Diagnosenliste' muss eine Codierung der Bedeutung der Section enthalten (gültiger Wert aus der Wertetabelle '2.16.840.1.113883.6.1').</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1006" test='descendant::*[cda:templateId/@root="2.16.756.5.30.1.1.1.1.1" and (cda:templateId/@extension="CDA-CH.Body.DiagL1" or cda:templateId/@extension="CDA-CH.Body.DiagL3")]'>
			<xhtml:p lang="de_ch">CDA-CH 'Diagnosenliste' muss mindestens eine observation 'Diagnose' enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
	</rule>

	<!--
	********************************************************
	Einzelne Diagnose im Level 1
	********************************************************
	-->
	<rule context='*[cda:templateId/@root="2.16.756.5.30.1.1.1.1.1" and cda:templateId/@extension="CDA-CH.Body.DiagL1"]'>
    	<!-- Rule Documentation -->
		<xhtml:h3 lang="de_ch">CDA-CH Diagnosenliste</xhtml:h3>
		<xhtml:p lang="de_ch">Die nachfolgenden Regeln beschreiben die Prüfungen zu den CDA-CH Diagnosenliste.</xhtml:p>
		<!--
		<xhtml:h3 lang="fr_ch">todo: francaise</xhtml:h3>
		<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
		<xhtml:h3 lang="it_ch">todo: italiano</xhtml:h3>
		<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
		--> 		
        
 		<assert id="entity_HL7-cda-ch-1.2-1101" test="self::cda:observation">
			<xhtml:p lang="de_ch">CDA-CH 'Diagnosen' müssen als 'observation' im CDA Body (section 'Schadeninformationen') deklariert werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1102" test='cda:effectiveTime'>
			<xhtml:p lang="de_ch">CDA-CH 'Diagnosen' müssen ein Datum der Feststellung enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1103" test='cda:text'>
			<xhtml:p lang="de_ch">CDA-CH 'Diagnosen' müssen einen narrativen Text enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
	</rule>

	<!--
	********************************************************
	Einzelne Diagnose im Level 3
	********************************************************
	-->
	<rule context='*[cda:templateId/@root="2.16.756.5.30.1.1.1.1.1" and cda:templateId/@extension="CDA-CH.Body.DiagL3"]'>
    	<!-- Rule Documentation -->
		<xhtml:h3 lang="de_ch">CDA-CH Einzelne Diagnose im Level 3</xhtml:h3>
		<xhtml:p lang="de_ch">Die nachfolgenden Regeln beschreiben die Prüfungen zu den CDA-CH Einzelne Diagnose im Level 3.</xhtml:p>
		<!--
		<xhtml:h3 lang="fr_ch">todo: francaise</xhtml:h3>
		<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
		<xhtml:h3 lang="it_ch">todo: italiano</xhtml:h3>
		<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
		--> 

 		<assert id="entity_HL7-cda-ch-1.2-1201" test="self::cda:observation">
			<xhtml:p lang="de_ch">CDA-CH 'Diagnosen' müssen als 'observation' im CDA Body (section 'Schadeninformationen') deklariert werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1202" test='cda:effectiveTime'>
			<xhtml:p lang="de_ch">CDA-CH 'Diagnosen' müssen ein Datum der Feststellung enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1203" test='cda:text'>
			<xhtml:p lang="de_ch">CDA-CH 'Diagnosen' müssen einen narrativen Text enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1204" test='cda:code/@codeSystem'>
			<xhtml:p lang="de_ch">CDA-CH 'Diagnosen' müssen einen Code enthalten und das Code System angeben (CDA Body Level 3).</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1205" test='cda:code/@code'>
			<xhtml:p lang="de_ch">CDA-CH 'Diagnosen' müssen einen Code enthalten (CDA Body Level 3).</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1206" test='cda:performer/cda:assignedEntity/cda:assignedPerson/cda:name'>
			<xhtml:p lang="de_ch">CDA-CH 'Diagnosen' müssen mindestens den Namen des beurteilenden Arztes angeben ('performer/assignedEntity/assignedPerson/name') (CDA Body Level 3).</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
	</rule>

	<!--
	********************************************************
	Vitalzeichenliste
	********************************************************
	-->
	<rule context='*[cda:templateId/@root="2.16.756.5.30.1.1.1.1.1" and cda:templateId/@extension="CDA-CH.Body.VitalSignList"]'>
    	<!-- Rule Documentation -->
		<xhtml:h3 lang="de_ch">CDA-CH Vitalzeichenliste</xhtml:h3>
		<xhtml:p lang="de_ch">Die nachfolgenden Regeln beschreiben die Prüfungen zu der CDA-CH Vitalzeichenliste.</xhtml:p>
		<!--
		<xhtml:h3 lang="fr_ch">todo: francaise</xhtml:h3>
		<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
		<xhtml:h3 lang="it_ch">todo: italiano</xhtml:h3>
		<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
		--> 

 		<assert id="entity_HL7-cda-ch-1.2-1301" test="self::cda:section">
			<xhtml:p lang="de_ch">CDA-CH 'Vitalzeichenliste' muss als 'section' im CDA Body deklariert werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1302" test="cda:text">
			<xhtml:p lang="de_ch">CDA-CH 'Vitalzeichenliste' muss einen narrativen Text enthalten</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1303" test="cda:title='Vitalzeichen'">
			<xhtml:p lang="de_ch">CDA-CH 'Vitalzeichenliste' muss einen section title 'Vitalzeichen' enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1304" test='cda:code/@codeSystem="2.16.840.1.113883.6.1"'>
			<xhtml:p lang="de_ch">CDA-CH 'Vitalzeichenliste' muss eine Codierung der Bedeutung der Section nach LOINC enthalten (OID für LOINC: 2.16.840.1.113883.6.1).</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1305" test='cda:code/@code="8716-3"'>
			<xhtml:p lang="de_ch">CDA-CH 'Vitalzeichenliste' muss eine Codierung der Bedeutung der Section enthalten (LOINC Code 8716-3 Physical findings; Sytem Vital signs).</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1306" test='descendant::*[cda:templateId/@root="2.16.756.5.30.1.1.1.1.1" and (cda:templateId/@extension="CDA-CH.Body.VitalSignL1" or cda:templateId/@extension="CDA-CH.Body.VitalSignL3")]'>
			<xhtml:p lang="de_ch">CDA-CH 'Vitalzeichenliste' muss mindestens eine observation 'Vitalzeichen' enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
	</rule>

	<!--
	********************************************************
	Einzelnes Vizalzeichen im Level 3
	********************************************************
	-->
	<rule context='*[cda:templateId/@root="2.16.756.5.30.1.1.1.1.1" and cda:templateId/@extension="CDA-CH.Body.VitalSignL3"]'>
    	<!-- Rule Documentation -->
		<xhtml:h3 lang="de_ch">CDA-CH Vitalzeichenliste</xhtml:h3>
		<xhtml:p lang="de_ch">Die nachfolgenden Regeln beschreiben die Prüfungen zu der CDA-CH Vitalzeichenliste.</xhtml:p>
		<!--
		<xhtml:h3 lang="fr_ch">todo: francaise</xhtml:h3>
		<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
		<xhtml:h3 lang="it_ch">todo: italiano</xhtml:h3>
		<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
		--> 

 		<assert id="entity_HL7-cda-ch-1.2-1401" test="self::cda:observation">
			<xhtml:p lang="de_ch">CDA-CH 'Vitalzeichen' müssen als 'observation' im CDA Body (section 'Vitalzeichen') deklariert werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1402" test='cda:effectiveTime'>
			<xhtml:p lang="de_ch">CDA-CH 'Vitalzeichen' müssen ein Datum der Feststellung enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1403" test='cda:text'>
			<xhtml:p lang="de_ch">CDA-CH 'Vitalzeichen' müssen einen narrativen Text enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1404" test='cda:code/@codeSystem'>
			<xhtml:p lang="de_ch">CDA-CH 'Vitalzeichen' müssen einen Code enthalten und das Code System angeben).</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1405" test='cda:code/@code'>
			<xhtml:p lang="de_ch">CDA-CH 'Vitalzeichen' müssen einen Code enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1406" test='cda:code/@codeSystem="2.16.840.1.113883.6.1"'>
			<xhtml:p lang="de_ch">CDA-CH 'Vitalzeichen' müssen mit einem LOINC Code angegeben werden).</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1407" test='cda:code/@code=document("../../../../schematrons/HL7.ch/CDA-CH/v1.2/cda-ch-1.2-voc.xml")/systems/system[@root="2.16.756.5.30.2.1.1.5.1" and @codeSystemName="VitalSignCodes"]/code/@value'>
			<xhtml:p lang="de_ch">CDA-CH 'Vitalzeichen' müssen mit einem LOINC Code aus der Wertetabelle 'VitalSignCodes, 2.16.756.5.30.2.1.1.5.1' angegeben werden).</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1408" test='cda:code/@code!="11449-6" or (cda:code/@code="11449-6" and cda:value/@codeSystem="2.16.756.5.30.2.1.1.4.1")'>
			<xhtml:p lang="de_ch">CDA-CH 'Vitalzeichen' Schwangerschaftstatus muss als CE mit codeSystem 2.16.756.5.30.2.1.1.4.1 angegeben werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1409" test='cda:code/@code!="11449-6" or (cda:code/@code="11449-6" and cda:value/@code=document("../../../../schematrons/HL7.ch/CDA-CH/v1.2/cda-ch-1.2-voc.xml")/systems/system[@root="2.16.756.5.30.2.1.1.4.1"]/code/@value)'>
			<xhtml:p lang="de_ch">CDA-CH 'Vitalzeichen' für 'Schwangerschaftstatus' müssen mit einem LOINC Code aus der Wertetabelle 'PregnancyStatus, 2.16.756.5.30.2.1.1.4.1' angegeben werden).</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1410" test='cda:value'>
			<xhtml:p lang="de_ch">CDA-CH 'Vitalzeichen' müssen ein Wert enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
	</rule>

	<!--
	********************************************************
	Intoleranzliste (Allergien / Unverträglichkeiten)
	********************************************************
	-->
	<rule context='*[cda:templateId/@root="2.16.756.5.30.1.1.1.1.1" and cda:templateId/@extension="CDA-CH.Body.IntoleranceList"]'>
    	<!-- Rule Documentation -->
		<xhtml:h3 lang="de_ch">CDA-CH Intoleranzliste (Allergien / Unverträglichkeiten)</xhtml:h3>
		<xhtml:p lang="de_ch">Die nachfolgenden Regeln beschreiben die Prüfungen zu der CDA-CH Intoleranzliste (Allergien / Unverträglichkeiten).</xhtml:p>
		<!--
		<xhtml:h3 lang="fr_ch">todo: francaise</xhtml:h3>
		<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
		<xhtml:h3 lang="it_ch">todo: italiano</xhtml:h3>
		<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
		--> 

 		<assert id="entity_HL7-cda-ch-1.2-1501" test="self::cda:section">
			<xhtml:p lang="de_ch">CDA-CH 'Intoleranzliste' muss als 'section' im CDA Body deklariert werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1502" test="cda:text">
			<xhtml:p lang="de_ch">CDA-CH 'Intoleranzliste' muss einen narrativen Text enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1503" test="cda:title='Allergien und Unverträglichkeiten'">
			<xhtml:p lang="de_ch">CDA-CH 'Intoleranzliste' muss einen section title 'Allergien und Unverträglichkeiten' enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
	</rule>

	<!--
	********************************************************
	Einzelne Allergie oder Unverträglichkeit
	********************************************************
	-->
	<rule context='*[cda:templateId/@root="2.16.756.5.30.1.1.1.1.1" and cda:templateId/@extension="CDA-CH.Body.IntoleranceL2"]'>
    	<!-- Rule Documentation -->
		<xhtml:h3 lang="de_ch">CDA-CH Einzelne Allergie oder Unverträglichkeit</xhtml:h3>
		<xhtml:p lang="de_ch">Die nachfolgenden Regeln beschreiben die Prüfungen zu der CDA-CH Einzelne Allergie oder Unverträglichkeit.</xhtml:p>
		<!--
		<xhtml:h3 lang="fr_ch">todo: francaise</xhtml:h3>
		<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
		<xhtml:h3 lang="it_ch">todo: italiano</xhtml:h3>
		<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
		--> 

 		<assert id="entity_HL7-cda-ch-1.2-1601" test="self::cda:observation">
			<xhtml:p lang="de_ch">Allergien und Unverträglichkeiten müssen als 'observation' im CDA Body (section 'Allergien und Unverträglichkeiten') deklariert werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1602" test='cda:code/@codeSystem="2.16.756.5.30.2.1.1.3.1"'>
			<xhtml:p lang="de_ch">Allergien und Unverträglichkeiten müssen eine strukturierte Angabe enthalten (gültiger Wert aus der Wertetabelle '2.16.756.5.30.2.1.1.3.1').</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1603" test='cda:code/@code=document("../../../../schematrons/HL7.ch/CDA-CH/v1.2/cda-ch-1.2-voc.xml")/systems/system[@root="2.16.756.5.30.2.1.1.3.1"]/code/@value'>
			<xhtml:p lang="de_ch">Allergien und Unverträglichkeiten müssen eine strukturierte Angabe enthalten (gültiger Wert aus der Wertetabelle '2.16.756.5.30.2.1.1.3.1').</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1604" test='(cda:code/@code="Y" and cda:text) or (cda:code/@code!="Y")'>
			<xhtml:p lang="de_ch">Allergien und Unverträglichkeiten müssen einen narrativen Text enthalten, wenn der code="Y" ist.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
	</rule>

	<!--
	********************************************************
	Liste mit Arbeitsfähigkeitseinträgen
	********************************************************
	-->
	<rule context='*[cda:templateId/@root="2.16.756.5.30.1.1.1.1.1" and cda:templateId/@extension="CDA-CH.Body.ArbeitsfähigkeitList"]'>
    	<!-- Rule Documentation -->
		<xhtml:h3 lang="de_ch">CDA-CH Liste mit Arbeitsfähigkeitseinträgen</xhtml:h3>
		<xhtml:p lang="de_ch">Die nachfolgenden Regeln beschreiben die Prüfungen zu der CDA-CH Liste mit Arbeitsfähigkeitseinträgen.</xhtml:p>
		<!--
		<xhtml:h3 lang="fr_ch">todo: francaise</xhtml:h3>
		<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
		<xhtml:h3 lang="it_ch">todo: italiano</xhtml:h3>
		<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
		--> 

 		<assert id="entity_HL7-cda-ch-1.2-1701" test="self::cda:section">
			<xhtml:p lang="de_ch">CDA-CH 'Arbeitsfähigkeit' muss als 'section' im CDA Body deklariert werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1702" test="cda:text">
			<xhtml:p lang="de_ch">CDA-CH 'Arbeitsfähigkeit' muss einen narrativen Text enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1703" test="cda:title='Arbeitsfähigkeit'">
			<xhtml:p lang="de_ch">CDA-CH 'Arbeitsfähigkeit' muss einen section title 'Arbeitsfähigkeit' enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1704" test='cda:code/@codeSystem="2.16.840.1.113883.6.1"'>
			<xhtml:p lang="de_ch">CDA-CH 'Arbeitsfähigkeit' muss eine Codierung der Bedeutung der Section nach LOINC enthalten (OID für LOINC: 2.16.840.1.113883.6.1).</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1705" test='cda:code/@code="X-ATWRK"'>
			<xhtml:p lang="de_ch">CDA-CH 'Arbeitsfähigkeit' muss eine Codierung der Bedeutung der Section enthalten (LOINC Code X-ATWRK gemäss VHitG REHA Kurzbrief).</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1706" test='descendant::*[cda:templateId/@root="2.16.756.5.30.1.1.1.1.1" and cda:templateId/@extension="CDA-CH.Body.ArbeitsfähigkeitL3"]'>
			<xhtml:p lang="de_ch">CDA-CH 'Arbeitsfähigkeit' muss mindestens eine observation 'Beurteilung Arbeitsfähigkeit' enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
	</rule>

	<!--
	********************************************************
	Beurteilung Arbeitsfähigkeit im Level 3
	********************************************************
	-->
	<rule context='*[cda:templateId/@root="2.16.756.5.30.1.1.1.1.1" and cda:templateId/@extension="CDA-CH.Body.ArbeitsfähigkeitL3"]'>
    	<!-- Rule Documentation -->
		<xhtml:h3 lang="de_ch">CDA-CH Beurteilung Arbeitsfähigkeit im Level 3</xhtml:h3>
		<xhtml:p lang="de_ch">Die nachfolgenden Regeln beschreiben die Prüfungen zu der CDA-CH Beurteilung Arbeitsfähigkeit im Level 3.</xhtml:p>
		<!--
		<xhtml:h3 lang="fr_ch">todo: francaise</xhtml:h3>
		<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
		<xhtml:h3 lang="it_ch">todo: italiano</xhtml:h3>
		<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
		--> 

 		<assert id="entity_HL7-cda-ch-1.2-1801" test="self::cda:observation">
			<xhtml:p lang="de_ch">CDA-CH 'Arbeitsfähigkeit Beurteilungen' müssen als 'observation' im CDA Body (section 'Vitalzeichen') deklariert werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1802" test='cda:effectiveTime'>
			<xhtml:p lang="de_ch">CDA-CH 'Arbeitsfähigkeit Beurteilungen' müssen ein Datum der Feststellung enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1803" test='cda:text'>
			<xhtml:p lang="de_ch">CDA-CH 'Arbeitsfähigkeit Beurteilungen' müssen einen narrativen Text enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1804" test='cda:code/@codeSystem="2.16.840.1.113883.6.1" and cda:code/@code="X-ATWRK"'>
			<xhtml:p lang="de_ch">CDA-CH 'Arbeitsfähigkeit Beurteilungen' müssen mit LOINC klassifiziert werden (LOINC Code X-ATWRK gemäss VHitG REHA Kurzbrief).</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1805" test='cda:effectiveTime/cda:low'>
			<xhtml:p lang="de_ch">CDA-CH 'Arbeitsfähigkeit Beurteilungen' müssen ein 'Gültig ab Datum' enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1806" role='warning' test='cda:effectiveTime/cda:high'>
			<xhtml:p lang="de_ch">CDA-CH 'Arbeitsfähigkeit Beurteilungen' sollten ein 'Gültig bis Datum / Datum der geplanten, nächsten Beurteilung' enthalten (letzte Beurteulung kann nullFlavor='NA' enthalten).</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1807" test='cda:value/@codeSystem="2.16.756.5.30.2.1.1.6.1"'>
			<xhtml:p lang="de_ch">CDA-CH 'Arbeitsfähigkeit Beurteilungen' müssen die zumutbare Anzahl Stunden/Tag enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1808" test='cda:value/@code=document("../../../../schematrons/HL7.ch/CDA-CH/v1.2/cda-ch-1.2-voc.xml")/systems/system[@root="2.16.756.5.30.2.1.1.6.1"]/code/@value'>
			<xhtml:p lang="de_ch">CDA-CH 'Arbeitsfähigkeit Beurteilungen' (zumutbare Anzahl Stunden/Tag) müssen mit einem gültigen Wert aus der Wertetabelle 'ArbeitsfähigkeitStunden', 2.16.756.5.30.2.1.1.6.1 angegeben werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1809" test='cda:interpretationCode/@codeSystem="2.16.756.5.30.2.1.1.7.1"'>
			<xhtml:p lang="de_ch">CDA-CH 'Arbeitsfähigkeit Beurteilungen' müssen die zumutbare Arbeitsintensität enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1810" test='cda:interpretationCode/@code=document("../../../../schematrons/HL7.ch/CDA-CH/v1.2/cda-ch-1.2-voc.xml")/systems/system[@root="2.16.756.5.30.2.1.1.7.1"]/code/@value'>
			<xhtml:p lang="de_ch">CDA-CH 'Arbeitsfähigkeit Beurteilungen' (zumutbare Arbeitsintensität) müssen mit einem gültigen Wert aus der Wertetabelle 'ArbeitsfähigkeitIntensität', 2.16.756.5.30.2.1.1.7.1 angegeben werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1811" test='cda:performer/cda:assignedEntity/cda:assignedPerson/cda:name'>
			<xhtml:p lang="de_ch">CDA-CH 'Arbeitsfähigkeit Beurteilungen' müssen mindestens den Namen des beurteilenden Arztes angeben ('performer/assignedEntity/assignedPerson/name').</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
	</rule>
	
	<!--
	********************************************************
	Impfungsstatus
	********************************************************
	-->
	<rule context='*[cda:templateId/@root="2.16.756.5.30.1.1.1.1.1" and cda:templateId/@extension="CDA-CH.Body.ImpfungStatusL2"]'>
    	<!-- Rule Documentation -->
		<xhtml:h3 lang="de_ch">CDA-CH Impfungsstatus</xhtml:h3>
		<xhtml:p lang="de_ch">Die nachfolgenden Regeln beschreiben die Prüfungen zu der CDA-CH Impfungsstatus.</xhtml:p>
		<!--
		<xhtml:h3 lang="fr_ch">todo: francaise</xhtml:h3>
		<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
		<xhtml:h3 lang="it_ch">todo: italiano</xhtml:h3>
		<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
		--> 

 		<assert id="entity_HL7-cda-ch-1.2-1901" test="self::cda:observation">
			<xhtml:p lang="de_ch">CDA-CH 'Impfung' müssen als 'observation' im CDA Body deklariert werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="entity_HL7-cda-ch-1.2-1902" test='cda:code/@codeSystem="2.16.840.1.113883.6.1" and cda:code/@code=document("../../../../schematrons/HL7.ch/CDA-CH/v1.2/cda-ch-1.2-voc.xml")/systems/system[@codeSystemName="Immunization"]/code/@value'>
			<xhtml:p lang="de_ch">CDA-CH 'Impfung' muss eine Codierung der Bedeutung der Section enthalten (gültiger Wert aus der Wertetabelle '2.16.840.1.113883.6.1', Teilmenge Immunization)</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
 		<assert id="entity_HL7-cda-ch-1.2-1903" test='cda:effectiveTime/cda:low or cda:effectiveTime/@value'>
			<xhtml:p lang="de_ch">CDA-CH 'Impfungen' müssen ein Datum enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
	</rule>
	
	
</pattern>

