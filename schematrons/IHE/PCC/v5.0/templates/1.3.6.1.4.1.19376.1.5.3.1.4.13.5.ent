<!--
********************************************************

Schematron Entity for Pregnancies
Language: en

History:
28.12.2009: Pascal BÃ¼rki, medshare GmbH (Copied from IHE PCC 2008)
31.12.2009: Tony Schaller, medshare GmbH (Abgabe an Auftraggeber)

******************************************************** -->

<!--  IHE PCC v3.0 Pregnancy Observation: 1.3.6.1.4.1.19376.1.5.3.1.4.13.5 -->

<!-- errors -->

<pattern id="p-1.3.6.1.4.1.19376.1.5.3.1.4.13.5-errors">
	<title>IHE PCC v3.0 Pregnancy Observation - errors validation phase</title>
	<rule context="*[cda:templateId/@root=&quot;1.3.6.1.4.1.19376.1.5.3.1.4.13.5&quot;]">
		<assert role='error' test='cda:templateId[@root="1.3.6.1.4.1.19376.1.5.3.1.4.13"]'>
			The parent template Id (1.3.6.1.4.1.19376.1.5.3.1.4.13) of
			Pregnancy Observation shall exist.
		</assert>
		<assert role='error' test='cda:code[@codeSystem="2.16.840.1.113883.6.1"]'>
			A Pregnancy Observation shall have a LOINC code describing what
			facet of patient's pregnancy history is being recorded.
		</assert>
		<assert role='error' test='not(cda:code[@code="11449-6"]) or
			(cda:code[@code="11449-6"] and
			cda:value[@xsi:type="CE"])'>
			The Pregnancy Observation with a LOINC code of 11449-6 shall be
			recorded using a CE datatype.
		</assert>
		<assert role='error' test='not(cda:code[@code="8678-5"]) or
			(cda:code[@code="8678-5"] and
			cda:value[@xsi:type="CE"])'>
			The Pregnancy Observation with a LOINC code of 8678-5 shall be
			recorded using a CE datatype.
		</assert>
		<assert role='error' test='not(cda:code[@code="8665-2"]) or
			(cda:code[@code="8665-2"] and
			cda:value[@xsi:type="TS"])'>
			The Pregnancy Observation with a LOINC code of 8665-2 shall be
			recorded using a TS datatype.
		</assert>
		<assert role='error' test='not(cda:code[@code="11636-8"]) or
			(cda:code[@code="11636-8"] and
			cda:value[@xsi:type="QTY"])'>
			The Pregnancy Observation with a LOINC code of 11636-8 shall be
			recorded using a QTY datatype.
		</assert>
		<assert role='error' test='not(cda:code[@code="11637-6"]) or
			(cda:code[@code="11637-6"] and
			cda:value[@xsi:type="QTY"])'>
			The Pregnancy Observation with a LOINC code of 11637-6 shall be
			recorded using a QTY datatype.
		</assert>
		<assert role='error' test='not(cda:code[@code="11638-4"]) or
			(cda:code[@code="11638-4"] and
			cda:value[@xsi:type="QTY"])'>
			The Pregnancy Observation with a LOINC code of 11638-4 shall be
			recorded using a QTY datatype.
		</assert>
		<assert role='error' test='not(cda:code[@code="11639-2"]) or
			(cda:code[@code="11639-2"] and
			cda:value[@xsi:type="QTY"])'>
			The Pregnancy Observation with a LOINC code of 11639-2 shall be
			recorded using a QTY datatype.
		</assert>
		<assert role='error' test='not(cda:code[@code="11640-0"]) or
			(cda:code[@code="11640-0"] and
			cda:value[@xsi:type="QTY"])'>
			The Pregnancy Observation with a LOINC code of 11640-0 shall be
			recorded using a QTY datatype.
		</assert>
		<assert role='error' test='not(cda:code[@code="11778-8"]) or
			(cda:code[@code="11778-8"] and
			cda:value[@xsi:type="TS"])'>
			The Pregnancy Observation with a LOINC code of 11778-8 shall be
			recorded using a TS datatype.
		</assert>
		<assert role='error' test='not(cda:code[@code="11779-6"]) or
			(cda:code[@code="11779-6"] and
			cda:value[@xsi:type="TS"])'>
			The Pregnancy Observation with a LOINC code of 11779-6 shall be
			recorded using a TS datatype.
		</assert>
		<assert role='error' test='not(cda:code[@code="11780-4"]) or
			(cda:code[@code="11780-4"] and
			cda:value[@xsi:type="TS"])'>
			The Pregnancy Observation with a LOINC code of 11780-4 shall be
			recorded using a TS datatype.
		</assert>
		<assert role='error' test='not(cda:code[@code="11884-4"]) or
			(cda:code[@code="11884-4"] and
			cda:value[@xsi:type="PQ"])'>
			The Pregnancy Observation with a LOINC code of 11884-4 shall be
			recorded using a PQ datatype.
		</assert>
		<assert role='error' test='not(cda:code[@code="11885-1"]) or
			(cda:code[@code="11885-1"] and
			cda:value[@xsi:type="PQ"])'>
			The Pregnancy Observation with a LOINC code of 11885-1 shall be
			recorded using a PQ datatype.
		</assert>
		<assert role='error' test='not(cda:code[@code="11886-9"]) or
			(cda:code[@code="11886-9"] and
			cda:value[@xsi:type="PQ"])'>
			The Pregnancy Observation with a LOINC code of 11886-9 shall be
			recorded using a PQ datatype.
		</assert>
		<assert role='error' test='not(cda:code[@code="11887-7"]) or
			(cda:code[@code="11887-7"] and
			cda:value[@xsi:type="PQ"])'>
			The Pregnancy Observation with a LOINC code of 11887-7 shall be
			recorded using a PQ datatype.
		</assert>



	</rule>
</pattern>

<!-- warning -->

<pattern id="p-1.3.6.1.4.1.19376.1.5.3.1.4.13.5-warnings">
	<title>IHE PCC v3.0 Pregnancy Observation - warning validation phase</title>


	<rule context="*[cda:templateId/@root=&quot;1.3.6.1.4.1.19376.1.5.3.1.4.13.5&quot;]">
		<assert role='warning' test='cda:code[@code = "11449-6" or
			@code = "8678-5" or
			@code = "8665-2" or
			@code = "11636-8" or
			@code = "11637-6" or
			@code = "11638-4" or
			@code = "11639-2" or
			@code = "11640-0" or
			@code = "11778-8" or
			@code = "11779-6" or
			@code = "11780-4" or
			@code = "11884-4" or
			@code = "11885-1" or
			@code = "11886-9" or
			@code = "11887-7"]'>
			A pregnancy observations shall have a LOINC code describing
			what facet of patient's pregnancy history is being recorded. These codes
			should come from the list ( see
			http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.13.5 ). Additional codes may be
			used to reflect additional information about the pregnancy history.
		</assert>

		<report test='cda:repeatNumber'>
			The &lt;repeatNumber&gt; element should not be present in a
			pregancy observation.
		</report>

		<report test='cda:interpretationCode or cda:methodCode or cda:targetSiteCode'>
			he &lt;interpretationCode&gt;, &lt;methodCode&gt;, and &lt;targetSiteCode&gt;
			should not be present in a pregnancy observation.
		</report>
	</rule>


</pattern>

<!-- manual -->

<pattern id="p-1.3.6.1.4.1.19376.1.5.3.1.4.13.5-manual">
	<title>IHE PCC v3.0 Pregnancy Observation - manual validation phase</title>

	<!--
	<rule context="*[cda:templateId/@root=&quot;1.3.6.1.4.1.19376.1.5.3.1.4.13.5&quot;]">
	<report test="."/>
	</rule>
	-->
</pattern>

