<!--
********************************************************

Schematron Entity for Immunizations
Language: en

History:
28.12.2009: Pascal BÃ¼rki, medshare GmbH (Copied from IHE PCC 2008)
31.12.2009: Tony Schaller, medshare GmbH (Abgabe an Auftraggeber)

******************************************************** -->

<!--  IHE PCC v3.0 Medication Fulfillment Instructions: 1.3.6.1.4.1.19376.1.5.3.1.4.3.1 -->

<!-- errors -->

<pattern id="p-1.3.6.1.4.1.19376.1.5.3.1.4.3.1-errors">
	<title>IHE PCC v3.0 Medication Fulfillment Instructions - errors validation phase</title>
	<rule context="*[cda:templateId/@root=&quot;1.3.6.1.4.1.19376.1.5.3.1.4.3.1&quot;]">
		<assert role='error' test='cda:templateId[@root="2.16.840.1.113883.10.20.1.43"]'>
			The parent CCD template ID (2.16.840.1.113883.10.20.1.43) for
			Medication Fulfillment Instructions shall exist.
		</assert>
		<assert role='error' test='cda:code[@code="FINSTRUCT" and
			@codeSystem="1.3.6.1.4.1.19376.1.5.3.2" and
			@codeSystemName="IHEActCode"]'>
			The code for Medication Fulfillment Instructions shall be
			recorded exactly as specified: &lt;code code='FINSTRUCT' codeSystem='1.3.6.1.4.1.19376.1.5.3.2'
			codeSystemName='IHEActCode' /&gt;.  See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.3.1
		</assert>
		<assert role='error' test='cda:text'>
			The &lt;text&gt; element of Medication Fulfillment
			Instructions contains a free text representation of the
			instruction. For CDA this SHALL contain a provides a &lt;reference&gt; element
			to the link text of the comment in the narrative portion of the
			document. The comment itself is not the act being coded, so it appears
			in the &lt;text&gt; of the &lt;observation&gt;, not as part of the &lt;code&gt;. For HL7
			Version 3 Messages, the full text SHALL be represented here.
		</assert>
		<assert role='error' test='cda:statusCode[@code="completed"]'>
			The code attribute of &lt;statusCode&gt; for all Medication
			Fulfillment Instriction comments must be completed.
		</assert>
	</rule>
</pattern>

<!-- warning -->

<pattern id="p-1.3.6.1.4.1.19376.1.5.3.1.4.3.1-warnings">
	<title>IHE PCC v3.0 Medication Fulfillment Instructions - warning validation phase</title>

	<!--
	<rule context="*[cda:templateId/@root=&quot;1.3.6.1.4.1.19376.1.5.3.1.4.3.1&quot;]">
	<report test="."/>
	</rule>
	-->

</pattern>

<!-- manual -->

<pattern id="p-1.3.6.1.4.1.19376.1.5.3.1.4.3.1-manual">
	<title>IHE PCC v3.0 Medication Fulfillment Instructions - manual validation phase</title>

	<!--
	<rule context="*[cda:templateId/@root=&quot;1.3.6.1.4.1.19376.1.5.3.1.4.3.1&quot;]">
	<report test="."/>
	</rule>
	-->
</pattern>

