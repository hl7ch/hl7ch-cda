<!--
********************************************************

Schematron rules for 2.16.756.5.30.1.100.2.2.1 (Suva eMedidoc, V1.0)
Language: de-CH

History:
20.12.2009: Tony Schaller, medshare GmbH (Draft)
31.12.2009: Tony Schaller, medshare GmbH (Abgabe an Auftraggeber)
26.03.2010: Stefan Schenk, medshare GmbH (Erweiterungen XHTML-Dokumentation)
17.05.2010: Tony Schaller, medshare GmbH (Einfügen finaler OIDs)
31.08.2010: Tony Schaller, medshare GmbH (eMedicus in eMedidoc umbenannt)

********************************************************
-->
<pattern>

	<!-- Entity Information -->
	<xhtml:ul id="suva_eMedidoc">
		<xhtml:li class="filename">eMedidoc-1.0.ent</xhtml:li>
		<xhtml:li class="version">1.0</xhtml:li>
	</xhtml:ul>

	<!--
	********************************************************
	Headerinformationen (section)
	********************************************************
	-->
	<rule context='cda:ClinicalDocument'>
		<!-- Rule Documentation -->
		<xhtml:h3 lang="de_ch">eMedidoc Headerinformationen prüfen</xhtml:h3>
		<xhtml:p lang="de_ch">Die nachfolgenden Regeln beschreiben die Prüfungen zu den Headerinformationen.</xhtml:p>
		<!--
		<xhtml:h3 lang="fr_ch">todo: francaise</xhtml:h3>
		<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
		<xhtml:h3 lang="it_ch">todo: italiano</xhtml:h3>
		<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
		-->

		<assert id="suva-eMedidoc-voc-1.0-0001" test='//cda:templateId/@root="2.16.756.5.30.1.100.2.1"'>
			<xhtml:p lang="de_ch">Die OID Domain für Suva Formularnummern muss lauten: 2.16.756.5.30.1.100.2.1</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-0002" test='//cda:code/@codeSystem="2.16.840.1.113883.6.1"'>
			<xhtml:p lang="de_ch">Die OID Domain für die Codierung von CDA Dokumenten muss lauten: 2.16.840.1.113883.6.1 (LOINC)</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
	</rule>

	<!--
	********************************************************
	Schadeninformation (section)
	********************************************************
	-->
	<rule context='*[cda:templateId/@root="2.16.756.5.30.1.100.2.2.1" and cda:templateId/@extension="eMedidoc.SchadenInfo"]'>
		<!-- Rule Documentation -->
		<xhtml:h3 lang="de_ch">eMedidoc Schadeninformationen</xhtml:h3>
		<xhtml:p lang="de_ch">Die nachfolgenden Regeln beschreiben die Prüfungen zu den Schadeninformationen.</xhtml:p>
		<!--
		<xhtml:h3 lang="fr_ch">todo: francaise</xhtml:h3>
		<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
		<xhtml:h3 lang="it_ch">todo: italiano</xhtml:h3>
		<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
		-->

		<assert id="suva-eMedidoc-voc-1.0-0100" test="self::cda:section">
			<xhtml:p lang="de_ch">Schadeninformationen müssen als 'section' im CDA Body deklariert werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-0101" test="cda:text">
			<xhtml:p lang="de_ch">Schadeninformationen müssen einen narrativen Text enthalten</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-0102" test="cda:title='Schadeninformationen'">
			<xhtml:p lang="de_ch">Schadeninformationen müssen einen section title 'Schadeninformationen' enthalten</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-0103" test='descendant::*[cda:templateId/@root="2.16.756.5.30.1.100.2.2.1" and cda:templateId/@extension="eMedidoc.SchadenInfoL3"]'>
			<xhtml:p lang="de_ch">Schadeninformationen müssen das Schadendatum enthalten</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
	</rule>

	<!--
	********************************************************
	Schadeninformation: SchadenDatum, Anmeldeart (Rückfall als Anmeldeart)
	********************************************************
	-->
	<rule context='*[cda:templateId/@root="2.16.756.5.30.1.100.2.2.1" and cda:templateId/@extension="eMedidoc.SchadenInfoL3"]'>
		<!-- Rule Documentation -->
		<xhtml:h3 lang="de_ch">eMedidoc Schadeninformation: SchadenDatum, Anmeldeart (Rückfall als Anmeldeart)</xhtml:h3>
		<xhtml:p lang="de_ch">Die nachfolgenden Regeln beschreiben die Prüfungen zu den Schadeninformationen.</xhtml:p>
		<!--
		<xhtml:h3 lang="fr_ch">todo: francaise</xhtml:h3>
		<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
		<xhtml:h3 lang="it_ch">todo: italiano</xhtml:h3>
		<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
		-->

		<assert id="suva-eMedidoc-voc-1.0-0201" test="self::cda:observation">
			<xhtml:p lang="de_ch">Das eMedidoc 'Schadendatum' muss als 'observation' im CDA Body (section 'Schadeninformationen') deklariert werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-0202" test='cda:id/@root="2.16.756.5.30.1.100.3.1.1"'>
			<xhtml:p lang="de_ch">Schadeninformationen müssen die externe Schadennummer der Suva enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-0203" test='cda:effectiveTime'>
			<xhtml:p lang="de_ch">Schadeninformationen müssen ein 'Schadendatum' enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-0204" test='cda:code/@codeSystem="2.16.756.5.30.1.100.3.2.2"'>
			<xhtml:p lang="de_ch">Schadeninformationen müssen eine Anmeldeart enthalten (gültiger Wert aus der Wertetabelle '2.16.756.5.30.1.100.3.2.2').</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-0205" test='cda:code/@code=document("eMedidoc-voc-1.0.xml")/systems/system[@root="2.16.756.5.30.1.100.3.2.2"]/code/@value'>
			<xhtml:p lang="de_ch">Schadeninformationen müssen eine Anmeldeart enthalten (gültiger Wert aus der Wertetabelle '2.16.756.5.30.1.100.3.2.2').</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
	</rule>

	<!--
	********************************************************
	Schadeninformation: Erstbehandlung durch ausfüllenden Arzt
	********************************************************
	-->
	<rule context='*[cda:templateId/@root="2.16.756.5.30.1.100.2.2.1" and cda:templateId/@extension="eMedidoc.ErstbehandlungL3"]'>
		<!-- Rule Documentation -->
		<xhtml:h3 lang="de_ch">eMedidoc Schadeninformation: Erstbehandlung durch ausfüllenden Arzt</xhtml:h3>
		<xhtml:p lang="de_ch">Die nachfolgenden Regeln beschreiben die Prüfungen zu der Schadeninformation Erstbehandlung.</xhtml:p>
		<!--
		<xhtml:h3 lang="fr_ch">todo: francaise</xhtml:h3>
		<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
		<xhtml:h3 lang="it_ch">todo: italiano</xhtml:h3>
		<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
		-->

		<assert id="suva-eMedidoc-voc-1.0-0301" test="self::cda:encounter">
			<xhtml:p lang="de_ch">Erstbehandlung muss als 'encounter' im CDA Body (section 'Schadeninformationen') deklariert werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-0302" test='cda:effectiveTime'>
			<xhtml:p lang="de_ch">Erstbehandlung muss ein Konsultationsdatum enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-0303" test='cda:code/@codeSystem="2.16.756.5.30.1.100.3.2.3"'>
			<xhtml:p lang="de_ch">Erstbehandlung muss die Angabe zur Inkonvenienz enthalten (gültiger Wert aus der Wertetabelle '2.16.756.5.30.1.100.3.2.3').</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-0304" test='cda:code/@code=document("eMedidoc-voc-1.0.xml")/systems/system[@root="2.16.756.5.30.1.100.3.2.3"]/code/@value'>
			<xhtml:p lang="de_ch">Erstbehandlung muss die Angabe zur Inkonvenienz enthalten (gültiger Wert aus der Wertetabelle '2.16.756.5.30.1.100.3.2.3').</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-0305" test='count(cda:code)&lt;2'>
			<xhtml:p lang="de_ch">Die Angabe zur Inkonvenienz bei der eMedidoc Erstbehandlung darf nur einmal vorkommen.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-0306" test='cda:performer/cda:assignedEntity/cda:assignedPerson/cda:name'>
			<xhtml:p lang="de_ch">Erstbehandlung durch ausfüllenden Arzt: Es muss mindestens der Namen des Arztes angeben werden ('performer/assignedEntity/assignedPerson/name') (CDA Body Level 3).</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
	</rule>

	<!--
	********************************************************
	Allgemeinzustand: Besondere Wahrnehmungen
	********************************************************
	-->
	<rule context='*[cda:templateId/@root="2.16.756.5.30.1.100.2.2.1" and cda:templateId/@extension="eMedidoc.BesoWahrn"]'>
		<!-- Rule Documentation -->
		<xhtml:h3 lang="de_ch">eMedidoc Allgemeinzustand: Besondere Wahrnehmungen</xhtml:h3>
		<xhtml:p lang="de_ch">Die nachfolgenden Regeln beschreiben die besonderen Wahrnehmungen des Allgemeinzustandes.</xhtml:p>
		<!--
		<xhtml:h3 lang="fr_ch">todo: francaise</xhtml:h3>
		<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
		<xhtml:h3 lang="it_ch">todo: italiano</xhtml:h3>
		<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
		-->

		<assert id="suva-eMedidoc-voc-1.0-0401" test="self::cda:observation">
			<xhtml:p lang="de_ch">Besondere Wahrnehmungen als 'observation' im CDA Body (section 'Allgemeinzustand') deklariert werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-0402" test='cda:code/@codeSystem="2.16.756.5.30.2.1.1.3.1"'>
			<xhtml:p lang="de_ch">Besondere Wahrnehmungen müssen eine strukturierte Angabe enthalten (gültiger Wert aus der Wertetabelle '2.16.756.5.30.2.1.1.3.1').</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-0403" test='cda:code/@code=document("../../../../schematrons/HL7.ch/CDA-CH/v1.2/cda-ch-1.2-voc.xml")/systems/system[@root="2.16.756.5.30.2.1.1.3.1"]/code/@value'>
			<xhtml:p lang="de_ch">Besondere Wahrnehmungen müssen eine strukturierte Angabe enthalten (gültiger Wert aus der Wertetabelle '2.16.756.5.30.2.1.1.3.1').</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-0404" test='(cda:code/@code="Y" and cda:text) or (cda:code/@code!="Y")'>
			<xhtml:p lang="de_ch">Besondere Wahrnehmungen müssen einen narrativen Text enthalten, wenn der code="Y" ist.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
	</rule>

	<!--
	********************************************************
	Allgemeinzustand: Folgen von
	********************************************************
	-->
	<rule context='*[cda:templateId/@root="2.16.756.5.30.1.100.2.2.1" and cda:templateId/@extension="eMedidoc.FolgenVon"]'>
		<!-- Rule Documentation -->
		<xhtml:h3 lang="de_ch">eMedidoc Allgemeinzustand: Folgen von</xhtml:h3>
		<xhtml:p lang="de_ch">Die nachfolgenden Regeln beschreiben die 'Folgen von' des Allgemeinzustandes.</xhtml:p>
		<!--
		<xhtml:h3 lang="fr_ch">todo: francaise</xhtml:h3>
		<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
		<xhtml:h3 lang="it_ch">todo: italiano</xhtml:h3>
		<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
		-->

		<assert id="suva-eMedidoc-voc-1.0-0501" test="self::cda:observation">
			<xhtml:p lang="de_ch">Folgen von als 'observation' im CDA Body (section 'Allgemeinzustand') deklariert werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-0502" test='cda:code/@codeSystem="2.16.756.5.30.2.1.1.3.1"'>
			<xhtml:p lang="de_ch">Folgen von müssen eine strukturierte Angabe enthalten (gültiger Wert aus der Wertetabelle '2.16.756.5.30.2.1.1.3.1').</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-0503" test='cda:code/@code=document("../../../../schematrons/HL7.ch/CDA-CH/v1.2/cda-ch-1.2-voc.xml")/systems/system[@root="2.16.756.5.30.2.1.1.3.1"]/code/@value'>
			<xhtml:p lang="de_ch">Folgen von müssen eine strukturierte Angabe enthalten (gültiger Wert aus der Wertetabelle '2.16.756.5.30.2.1.1.3.1').</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-0504" test='(cda:code/@code="Y" and cda:value/@xsi:type="ST") or (cda:code/@code!="Y")'>
			<xhtml:p lang="de_ch">Folgen von müssen einen narrativen Text im Element value enthalten, wenn der code="Y" ist.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
	</rule>

	<!--
	********************************************************
	Befund: Lokalbefund
	********************************************************
	-->
	<rule context='*[cda:templateId/@root="2.16.756.5.30.1.100.2.2.1" and cda:templateId/@extension="eMedidoc.Lokalbefund"]'>
		<!-- Rule Documentation -->
		<xhtml:h3 lang="de_ch">eMedidoc Befund: Lokalbefund</xhtml:h3>
		<xhtml:p lang="de_ch">Die nachfolgenden Regeln beschreiben den Lokalbefund.</xhtml:p>
		<!--
		<xhtml:h3 lang="fr_ch">todo: francaise</xhtml:h3>
		<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
		<xhtml:h3 lang="it_ch">todo: italiano</xhtml:h3>
		<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
		-->

		<assert id="suva-eMedidoc-voc-1.0-0601" test="self::cda:observation">
			<xhtml:p lang="de_ch">Lokalbefund muss als 'observation' im CDA Body (section 'Allgemeinzustand') deklariert werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-0602" test='cda:text'>
			<xhtml:p lang="de_ch">Lokalbefund muss einen narrativen Text enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
	</rule>

	<!--
	********************************************************
	Befund: Röntgenbefund
	********************************************************
	-->
	<rule context='*[cda:templateId/@root="2.16.756.5.30.1.100.2.2.1" and cda:templateId/@extension="eMedidoc.Röntgenbefund"]'>
		<!-- Rule Documentation -->
		<xhtml:h3 lang="de_ch">eMedidoc Befund: Röntgenbefund</xhtml:h3>
		<xhtml:p lang="de_ch">Die nachfolgenden Regeln beschreiben den Röntgenbefund.</xhtml:p>
		<!--
		<xhtml:h3 lang="fr_ch">todo: francaise</xhtml:h3>
		<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
		<xhtml:h3 lang="it_ch">todo: italiano</xhtml:h3>
		<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
		-->

		<assert id="suva-eMedidoc-voc-1.0-0701" test="self::cda:observation">
			<xhtml:p lang="de_ch">Röntgenbefund muss als 'observation' im CDA Body (section 'Allgemeinzustand') deklariert werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-0702" test='cda:code/@code=document("../../../../schematrons/HL7.ch/CDA-CH/v1.2/cda-ch-1.2-voc.xml")/systems/system[@root="2.16.756.5.30.2.1.1.3.1"]/code/@value'>
			<xhtml:p lang="de_ch">Röntgenbefund muss eine strukturierte Angabe enthalten (gültiger Wert aus der Wertetabelle '2.16.756.5.30.2.1.1.3.1').</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<!-- Verwende code="N" wenn kein Röntgen gemacht wurde-->
		<assert id="suva-eMedidoc-voc-1.0-0703" test='(cda:code/@code="Y" and cda:text) or (cda:code/@code!="Y")'>
			<xhtml:p lang="de_ch">Röntgenbefund muss einen narrativen Text enthalten, wenn der code="Y" ist.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
	</rule>

	<!--
	********************************************************
	Diagnosen: siehe CDA-CH.Body.DiagList
	********************************************************
	-->
	<!--
	********************************************************
	Kausalität: Ausschliesslich Unfallfolgen
	********************************************************
	-->
	<rule context='*[cda:templateId/@root="2.16.756.5.30.1.100.2.2.1" and cda:templateId/@extension="eMedidoc.Unfallfolgen"]'>
		<!-- Rule Documentation -->
		<xhtml:h3 lang="de_ch">eMedidoc Kausalität: Ausschliesslich Unfallfolgen</xhtml:h3>
		<xhtml:p lang="de_ch">Die nachfolgenden Regeln beschreiben die Kausalität (Ausschliesslich Unfallfolgen).</xhtml:p>
		<!--
		<xhtml:h3 lang="fr_ch">todo: francaise</xhtml:h3>
		<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
		<xhtml:h3 lang="it_ch">todo: italiano</xhtml:h3>
		<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
		-->

		<assert id="suva-eMedidoc-voc-1.0-0801" test="self::cda:observation">
			<xhtml:p lang="de_ch">Unfallfolgen muss als 'observation' im CDA Body (section 'Allgemeinzustand') deklariert werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-0802" test='cda:code/@code=document("../../../../schematrons/HL7.ch/CDA-CH/v1.2/cda-ch-1.2-voc.xml")/systems/system[@root="2.16.756.5.30.2.1.1.3.1"]/code/@value'>
			<xhtml:p lang="de_ch">Unfallfolgen muss eine strukturierte Angabe enthalten (gültiger Wert aus der Wertetabelle '2.16.756.5.30.2.1.1.3.1').</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<!-- Verwende code="Y" wenn ausschliesslich Unfallfolgen vorliegen-->
		<assert id="suva-eMedidoc-voc-1.0-0803" test='(cda:code/@code="N" and cda:text) or (cda:code/@code!="N")'>
			<xhtml:p lang="de_ch">Wenn nicht ausschliesslich Unfallfolgen vorliegen, muss die observation einen narrativen Text mit der Begründung enthalten (wenn der code="N" ist).</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
	</rule>

	<!--
	********************************************************
	Therapie: Massnahmen
	********************************************************
	-->
	<rule context='*[cda:templateId/@root="2.16.756.5.30.1.100.2.2.1" and cda:templateId/@extension="eMedidoc.TherapieMassnahme"]'>
		<!-- Rule Documentation -->
		<xhtml:h3 lang="de_ch">eMedidoc Therapie: Massnahmen</xhtml:h3>
		<xhtml:p lang="de_ch">Die nachfolgenden Regeln beschreiben die Therapie (Massnahmen).</xhtml:p>
		<!--
		<xhtml:h3 lang="fr_ch">todo: francaise</xhtml:h3>
		<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
		<xhtml:h3 lang="it_ch">todo: italiano</xhtml:h3>
		<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
		-->

		<assert id="suva-eMedidoc-voc-1.0-0901" test="self::cda:procedure">
			<xhtml:p lang="de_ch">Therapie Massnahme muss als 'procedure' im CDA Body (section 'Therapie') deklariert werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-0902" test="cda:text">
			<xhtml:p lang="de_ch">Therapie Massnahme muss einen narrativen Text enthalten</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
	</rule>
	<!--
	********************************************************
	Therapie: Besondere Umstände
	********************************************************
	-->
	<rule context='*[cda:templateId/@root="2.16.756.5.30.1.100.2.2.1" and cda:templateId/@extension="eMedidoc.BesoUmstände"]'>
		<!-- Rule Documentation -->
		<xhtml:h3 lang="de_ch">eMedidoc Therapie: Besondere Umstände</xhtml:h3>
		<xhtml:p lang="de_ch">Die nachfolgenden Regeln beschreiben die Therapie (Besondere Umstände).</xhtml:p>
		<!--
		<xhtml:h3 lang="fr_ch">todo: francaise</xhtml:h3>
		<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
		<xhtml:h3 lang="it_ch">todo: italiano</xhtml:h3>
		<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
		-->

		<assert id="suva-eMedidoc-voc-1.0-1001" test="self::cda:observation">
			<xhtml:p lang="de_ch">Besondere Umstände müssen als 'observation' im CDA Body (section 'Therapie') deklariert werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-1002" test='cda:code/@codeSystem="2.16.756.5.30.2.1.1.3.1"'>
			<xhtml:p lang="de_ch">Besondere Umstände müssen eine strukturierte Angabe enthalten (gültiger Wert aus der Wertetabelle '2.16.756.5.30.2.1.1.3.1').</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-1003" test='cda:code/@code=document("../../../../schematrons/HL7.ch/CDA-CH/v1.2/cda-ch-1.2-voc.xml")/systems/system[@root="2.16.756.5.30.2.1.1.3.1"]/code/@value'>
			<xhtml:p lang="de_ch">Besondere Umstände müssen eine strukturierte Angabe enthalten (gültiger Wert aus der Wertetabelle '2.16.756.5.30.2.1.1.3.1').</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-1004" test='(cda:code/@code="Y" and cda:text) or (cda:code/@code!="Y")'>
			<xhtml:p lang="de_ch">Besondere Umstände müssen einen narrativen Text enthalten, wenn der code="Y" ist.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
	</rule>
	<!--
	********************************************************
	Arbeitsfähigkeit: siehe CDA-CH.Body.Arbeitsfähigkeit
	********************************************************
	-->
	<!--
	********************************************************
	Behandlungsabschluss
	********************************************************
	-->
	<rule context='*[cda:templateId/@root="2.16.756.5.30.1.100.2.2.1" and cda:templateId/@extension="eMedidoc.BehAbschluss"]'>
		<!-- Rule Documentation -->
		<xhtml:h3 lang="de_ch">eMedidoc Behandlungsabschluss</xhtml:h3>
		<xhtml:p lang="de_ch">Die nachfolgenden Regeln beschreiben den Behandlungsabschluss.</xhtml:p>
		<!--
		<xhtml:h3 lang="fr_ch">todo: francaise</xhtml:h3>
		<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
		<xhtml:h3 lang="it_ch">todo: italiano</xhtml:h3>
		<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
		-->

		<assert id="suva-eMedidoc-voc-1.0-1101" test="self::cda:section">
			<xhtml:p lang="de_ch">CDA-CH 'Behandlungsabschluss' muss als 'section' im CDA Body deklariert werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-1102" test="cda:text">
			<xhtml:p lang="de_ch">CDA-CH 'Behandlungsabschluss' muss einen narrativen Text enthalten</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-1103" test="cda:title='Behandlungsabschluss'">
			<xhtml:p lang="de_ch">CDA-CH 'Behandlungsabschluss' muss einen section title 'Behandlungsabschluss' enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-1104" test='descendant::*[cda:templateId/@root="2.16.756.5.30.1.100.2.2.1" and cda:templateId/@extension="eMedidoc.BehAbschlussL3"]'>
			<xhtml:p lang="de_ch">CDA-CH 'Behandlungsabschluss' muss einen encounter mit Template 'BehAbschlussL3' enthalten.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
	</rule>

	<!--
	********************************************************
	Behandlungsabschluss L3
	********************************************************
	-->
	<rule context='*[cda:templateId/@root="2.16.756.5.30.1.100.2.2.1" and cda:templateId/@extension="eMedidoc.BehAbschlussL3"]'>
		<!-- Rule Documentation -->
		<xhtml:h3 lang="de_ch">eMedidoc Behandlungsabschluss L3</xhtml:h3>
		<xhtml:p lang="de_ch">Die nachfolgenden Regeln beschreiben den Behandlungsabschluss L3.</xhtml:p>
		<!--
		<xhtml:h3 lang="fr_ch">todo: francaise</xhtml:h3>
		<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
		<xhtml:h3 lang="it_ch">todo: italiano</xhtml:h3>
		<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
		-->

		<assert id="suva-eMedidoc-voc-1.0-1201" test="self::cda:encounter">
			<xhtml:p lang="de_ch">Behandlungsabschluss muss als 'encounter' im CDA Body (section 'Behandlungsabschluss') deklariert werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-1202" test='cda:effectiveTime/cda:high'>
			<xhtml:p lang="de_ch">Behandlungsabschluss Datum muss im high element von effectiveTime angegeben werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-1203" test='cda:code/@codeSystem="2.16.840.1.113883.6.1" and cda:code/@code="8649-6"'>
			<xhtml:p lang="de_ch">Behandlungsabschluss muss als LOINC Code deklariert sein (8649-6; Hospital discharge date)</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-1204" test='descendant::*[cda:assignedEntity/cda:representedOrganization/cda:name]'>
			<xhtml:p lang="de_ch">Behandlungsabschluss muss die Letzbehandelnde Organisation angeben ('performer/assignedEntity/representedOrganization', min. Namen angeben)</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
	</rule>

	<!--
	********************************************************
	Therapie: Patient hospitalisiert
	********************************************************
	-->
	<rule context='*[cda:templateId/@root="2.16.756.5.30.1.100.2.2.1" and cda:templateId/@extension="eMedidoc.PatHospitalisiert"]'>
		<!-- Rule Documentation -->
		<xhtml:h3 lang="de_ch">eMedidoc Therapie: Patient hospitalisiert</xhtml:h3>
		<xhtml:p lang="de_ch">Die nachfolgenden Regeln beschreiben die Therapie (Patient hospitalisiert).</xhtml:p>
		<!--
		<xhtml:h3 lang="fr_ch">todo: francaise</xhtml:h3>
		<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
		<xhtml:h3 lang="it_ch">todo: italiano</xhtml:h3>
		<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
		-->

		<assert id="suva-eMedidoc-voc-1.0-1301" test="self::cda:procedure">
			<xhtml:p lang="de_ch">Patient hospitalisiert muss als 'procedure' im CDA Body (section 'Therapie') deklariert werden.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-1302" test='cda:code/@codeSystem="2.16.756.5.30.2.1.1.3.1"'>
			<xhtml:p lang="de_ch">Patient hospitalisiert muss eine strukturierte Angabe enthalten (gültiger Wert aus der Wertetabelle '2.16.756.5.30.2.1.1.3.1').</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-1303" test='cda:code/@code=document("../../../../schematrons/HL7.ch/CDA-CH/v1.2/cda-ch-1.2-voc.xml")/systems/system[@root="2.16.756.5.30.2.1.1.3.1"]/code/@value'>
			<xhtml:p lang="de_ch">Patient hospitalisiert muss eine strukturierte Angabe enthalten (gültiger Wert aus der Wertetabelle '2.16.756.5.30.2.1.1.3.1').</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
		<assert id="suva-eMedidoc-voc-1.0-1304" test='(cda:code/@code="Y" and count(cda:performer/cda:assignedEntity/cda:representedOrganization/cda:name)=1) or (cda:code/@code!="Y")'>
			<xhtml:p lang="de_ch">Patient hospitalisiert muss über 'performer/assignedEntity/representedOrganization' das behandelnde Spital angeben (min. Namen angeben), wenn der code="Y" ist.</xhtml:p>
			<!--
			<xhtml:p lang="fr_ch">todo: francaise</xhtml:p>
			<xhtml:p lang="it_ch">todo: italiano</xhtml:p>
			-->
		</assert>
	</rule>

	<!--
	********************************************************
	Bemerkungen: siehe CDA-CH.Body.Rem
	********************************************************
	-->


</pattern>
